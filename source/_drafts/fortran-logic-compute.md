---
title: Fortran语言学习——流程控制与逻辑运算
tags:
- 编程
- Fortran
---

{% note primary %}
我们假设大家都有一定的编程基础，至少知道编程过程中流程控制是什么意思（<span class="heimu">其实也没啥意思，就是条件语句之类的</span>）。另外把实际的例子的代码省去，这样更加精简的作为字典或者文档查询更加方便。
{% endnote %}

# 1.IF语句

首先第一个我们需要接触的就是if条件语句，在Fortran语言中一般这样写：
```Fortran
if (逻辑判断式) then
    ...
    ...
    ...
end if

```
举个书上的例子，我们写一个速度超过一百就会发出警报的简单程序：
```Fortran
if(speed>100)then
    ! speed > 100时才会执行下面的语句
    write(*,*)"Slow down."
end if
stop
```
注意该程序知识一部分而已，前面变量的申明还是要照样做的。另外除此之外还可以简写成如下的形式：
```Fortran
if (speed>100) write(*,*) "Slow down."
```

## 条件分支

除此之外呢，我们可能还需要设置不满足条件时应该执行的语句，或者是有其他很多种情况的分支，这个时候就需要这么写：

```Fortran
if (条件1) then ! 情况1
    ...
    ...
else if (条件2) then ! 情况2
    ...
    ...
else if (条件3) then ! 情况3
    ...
    ...
...
else ! 以上情况都不满足的情况
    ...
    ...
end if
```

## 逻辑判断符号以及集合判断符号

另外补充以下在Fortran中表示逻辑判断以及集合判断的方式:

代码 | 表示含义 
:-------:|:--------:
 `==` | 相等 
 `/=` | 不等于 
 `>` | 大于 
 `>=` | 大于等于 
 `<` | 小于 
 `<=` | 小于等于 
 `.and.` | 交集 
 `.or.` | 并集 
 `.not.` | 不成立 
 `.eqv.` | 逻辑运算相等 
 `.neqv.` | 逻辑运算不相等 

 以上，逻辑判断的运算等级高于集合运算的等级，同时出现时先执行逻辑判断（大于小于等于之类的）的语句。

## 嵌套使用 

当存在if语句的嵌套使用时，可以这样：

```fortran
if (...) then ! 第一层
	if (...) then ! 第二层
		if (...) then ! 第三层主条件
			...
		else if (...) then ! 第三层次条件
			...
		else ! 第三层其余情况
			...
		end if ! 第三层结束
	end if ! 第二层结束
end if ! 第一层结束
```

# 2.浮点数以及字符的逻辑运算

## 浮点数的逻辑判断

我们知道，由于计算机运行方式以及内存情况的限制，当我们进行浮点数之间的计算时通常是带有误差的，比如：$a=\sqrt{b}^2-b = 0$在实际的运算过程中可能会出现$a$不等于0的情况，这是因为计算机在计算浮点数时的有效位数的问题造成的。举个例子，$\sqrt{3}$在计算时只能采用有限的位数来保存，这个时候就会出现误差，再将这个存在误差的数字作幂次运算，等到的结果必然不会是3，而是一个接近3的数字。

如果我们需要对类似这样的情况作出判断，（判断$\sqrt{b}^2-b$是否等于0），就需要对我们的结果预留出一些误差的空间。这样，我们可以把上面的过程写成如下的形式：

```fortran
program example
implicit none
	real :: b = 4.0
	real :: a
	real, parameter :: e = 0.0001 ! 表示误差的范围
	a = sqrt(b)**2-b
	
	if (abs(a-0.0) <= e) then
		write(*,*) "a等于0！"
	else
		write(*,*) "a不等于0！"
	end if

	stop
end
```

## 字符的逻辑判断

和Python一样，字符甚至字符串之间也是可以用来做逻辑判断的，这实际上使用的字符转换成ASCII码之后的数值进行的逻辑判断。比如说判断`'A' < 'a'`为`true`是因为a的ASCII码为97，A的ASCII码为65。

需要注意的是，当字符串作比较时，实际上比较的是第一个字符的ASCII码，如果第一个字符相同就比较第二个字符，依此类推。