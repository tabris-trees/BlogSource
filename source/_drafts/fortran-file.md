---
title: fortran-file
tags:
- 编程
- Fortran
---

{% note primary %}
计算机有两项功能，一项是计算、处理数据；一项是保存数据。前面的内容都是在讨论如何处理数据，现在来讨论如何保存数据。

数据的保存主要是依赖于文件，程序将数据写入文件，就可以将这些数据长久的保存，直到文件被更改或者销毁。
{% endnote %}

# 文件读取的概念🍉

Fortran中文件读取有“顺序读取”和“直接读取”两种：

1. 顺序读取：指的是读取文件时按照文件中数据的顺序从头开始，依次往下读取，如同听录音带一样。这是最简单的方法，足以应付绝大多数情况；
2. 直接读取：指读取文件时可以任意跳到文件的任何一个位置开始读写，类似于DVD，可以直接欣赏某一个部分。

保存文件同样可以有两种方法：

1. 文本文件：所有的数据都是容易阅读的字符或者符号，可以使用文本编辑器打开；
2. 二进制文件：数据被保存为二进制代码（全是数字0和1组成），需要专门的软件打开。

相对来说，二进制的文件读取速度更快，它的保存格式与数据在内存中的格式是一致的，不像文本格式需要经过转换；其次，二进制的文件更加省空间，很简单，计算机底层的结构就是二进制，自然具有各方面的优势。

---

# 文件的操作🍈

{% note primary %}
该部分的内容很多，只需要记住常见命令即可，很多命令基本不会用到。
{% endnote %}

## `OPEN`的使用

`open`的使用与`write(*,*)`以及`read(*,*)`中的第一个*号（输入\输出的位置，默认是键盘\屏幕）有关：

```Fortran
open(unit=10,file='hello.txt')
! unit=N用来给后面的文件指定一个代码（N），file则表示打开的文件
! 文件不存在时则创建一个新文件
write(10,*) "hello,World!"
! 如此一来，"hello,World!"这个字符串就被保存到文件hello.txt中了
```

`open`的详细参数非常之多，这里列出比较常见的：

1. unit=number，number必须是一个正整数，可以是变量，尽量不要用1，2，5，6（<span style='background: yellow;'>1，5是默认输入的位置，即键盘；2，6是默认输出的位置，即屏幕</span>）；
2. file='filename'，很简单，文件名，注意要符合操作系统的文件命名习惯；
3. form='formatted'（ **'文本格式'** 保存）\'unformatted'（ **'二进制格式'** 保存）,默认'**文本格式**'；
4. status='new'（打开新文件）\'old'（打开旧文件）\'replace'（文件若已经存在，则替换原文件，不存在则新建）\'scratch'（暂时文件，此时不用指定文件名，程序结束文件会被自动删除）\'unkown'（由编译器自定义，一般相当于'replace'），默认'unkown'；
5. access='sequential'（ **'顺序读取'** 文件）\'direct'（ **'直接读取'** 文件），默认 **'顺序读取'** ；
6. err=label，文件打开错误时，程序会跳转到label所指的行代码继续执行；
7. iostat=var，将文件打开的状态赋值给var变量（这意味着要对其进行声明）：

   - var > 0 : 读取操作发生错误；
   - var < 0 : 文件终了；
   - var = 0 : 文件读取正常。

8. action='read'（**只读**）\'write'（**只写**）\'readwrite'（**读写皆可**，默认）；

## `WRITE`，`READ`的使用